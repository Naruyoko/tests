<!DOCTYPE html>
<html>
  <head>
    <title>Notations - PsiCubed2's Letter Notation - Single Letter to Letter Only</title>
    <style>
      * {
        font-family:"Verdana",sans-serif;
      }
    </style>
    <script>
      var ARGLIM=100;
      function step(){
        var e=document.getElementById("space").textContent;
        console.log(0);
        if (e.search(/[A-Z]/)==-1) return false;
        console.log(1);
        var q=e.search(/[0-9]/);
        if (q==-1) return false;
        console.log(2);
        var n=e.substring(q);
        if ((n.search(/[0-9]/))||(n.indexOf("*10^")!=-1)) return false;
        console.log(3);
        n=Number(n);
        var x=q-1;
        console.log(x)
        while ((x>=0)&&(e.charAt(x).search(/[A-Z]/)==-1)) x--;
        if (x<0) return false;
        console.log(4);
        var m=e.substring(x,q);
        var r;
        var s;
        if (m=="E"){
          if (n<12){
            r="";
            s=String(Math.pow(10,n));
          }else{
            r="";
            s=Math.pow(10,n-Math.floor(n)).toFixed(11-String(Math.floor(n)).length)+"*10^"+Math.floor(n);
          }
        }else if (m=="F"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=1){
            r="EF";
            s=String(n-1);
          }else{
            r="";
            s=String(Math.pow(10,n));
          }
        }else if (m=="G"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=1){
            r="FG";
            s=String(n-1);
          }else{
            r="";
            s=String(Math.pow(10,n));
          }
        }else if (m=="H"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=1){
            r="GH";
            s=String(n-1);
          }else{
            r="";
            s=String(Math.pow(10,n));
          }
        }else if (m.charAt(m.length-1)=="e"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=1){
            r=m.substring(0,m.length-1)+m;
            s=String(n-1);
          }else{
            r=m.substring(0,m.length-1);
            s=String(Math.pow(10,n));
          }
        }else if (m.charAt(m.length-1)=="f"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=1){
            r=m.substring(0,m.length-1)+"e"+m;
            s=String(n-1);
          }else{
            r=m.substring(0,m.length-1)+"e";
            s=String(Math.pow(10,n));
          }
        }else if (m.charAt(m.length-1)=="g"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=1){
            r=m.substring(0,m.length-1)+"f"+m;
            s=String(n-1);
          }else{
            r=m.substring(0,m.length-1)+"f";
            s=String(Math.pow(10,n));
          }
        }else if (m.charAt(m.length-1)=="h"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=1){
            r=m.substring(0,m.length-1)+"g"+m;
            s=String(n-1);
          }else{
            r=m.substring(0,m.length-1)+"g";
            s=String(Math.pow(10,n));
          }
        }else if (m=="J"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=2){
            var h=Math.floor(n)+1;
            r=["E","F","G","H"][Math.min(h-1,3)]+trail1(h-4);
            s=String(2*Math.pow(5,n-Math.floor(n)));
          }else{
            r="G";
            s=String(n);
          }
        }else if (m=="K"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=1){
            r="JK";
            s=String(n-1);
          }else{
            r="";
            s=String(Math.pow(10,n));
          }
        }else if (m=="L"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=1){
            r="KL";
            s=String(n-1);
          }else{
            r="";
            s=String(Math.pow(10,n));
          }
        }else if (m=="M"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=2){
            var h=Math.floor(n)+1;
            r=["J","K","L"][Math.min(h,2)]+trail1(h-2);
            s=String(2*Math.pow(5,n-Math.floor(n)));
          }else{
            r="Le";
            s=String(n);
          }
        }else if (m.charAt(m.length-1)=="j"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=2){
            var h=Math.floor(n)+1;
            r=m.substring(0,m.length-1)+trail1(h);
            s=String(2*Math.pow(5,n-Math.floor(n)));
          }else{
            r=m.substring(0,m.length-1)+"g";
            s=String(Math.pow(10,n));
          }
        }else if (m.charAt(m.length-1)=="k"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=1){
            r=m.substring(0,m.length-1)+"j"+m;
            s=String(n-1);
          }else{
            r=m.substring(0,m.length-1)+"j";
            s=String(Math.pow(10,n));
          }
        }else if (m.charAt(m.length-1)=="l"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=1){
            r=m.substring(0,m.length-1)+"k"+m;
            s=String(n-1);
          }else{
            r=m.substring(0,m.length-1)+"k";
            s=String(Math.pow(10,n));
          }
        }else if (m=="N"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=2){
            r=standarize(trail2(Math.floor(n))+trail1(n.toFixed(1).charAt(2)));
            r=r.charAt(0).toUpperCase()+r.substring(1);
            s=String(2*Math.pow(5,n*100-Math.floor(n*100)));
          }else{
            r="Me";
            s=String(n);
          }
        }else if (m.charAt(m.length-1)=="m"){
          if (n>=ARGLIM){
            return false;
          }else if (n>=2){
            var h=Math.floor(n)+1;
            r=m.substring(0,m.length-1)+["J","K","L"][Math.min(h,2)]+trail1(h-2);
            s=String(2*Math.pow(5,n-Math.floor(n)));
          }else{
            r=m.substring(0,m.length-1)+"le";
            s=String(Math.pow(10,n));
          }
        }else return false;
        console.log(5);
        console.log(document.getElementById("n").textContent="e,q,n,x,m,r,s:"+e+","+q+","+n+","+x+","+m+","+r+","+s);
        document.getElementById("space").textContent=e.substring(0,x)+r+s;
        return true;
      }
      function full(){
        console.log("full");
        while(step()) continue;
      }
      var k;
      function progression(){
        if (!k) k=setInterval(()=>{if(!step()){clearInterval(k);k=0}},100);
      }

      function trail1(n){
        return n>1?(n>=4?"h".repeat(n/4):"")+["","e","f","g"][n%4]:"";
      }
      function trail2(n){
        return n>1?(n>=2?"m".repeat(n/2):"")+["","l"][n%2]:"";
      }
      function standarize(s){
        return s.replace("ee","f").replace("fe","g").replace("ge","h").replace("je","k").replace("ke","l").replace("jf","l").replace("jj","m");
      }
    </script>
  </head>
  <body>
    <h1>PsiCubed2's Letter Notation - Single Letter to Letter Only</h1>
    <div id="space" style="resize:none;display:block;overflow:auto;background-color:white;border:darkgray solid 1px;" contentEditable>F5.1928383828</div><br>
    <button onclick="step()">Step</button>
    <button onclick="full()">Full</button>
    <button onclick="progression()">Progression</button>
    <div id="n">K</div>
  </body>
</html>
